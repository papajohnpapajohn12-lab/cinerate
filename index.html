<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>CineRate ‚Äî –û—Ü–µ–Ω–∫–∞ —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–µ—Ä–∏–∞–ª–æ–≤</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%236366f1'/%3E%3Cstop offset='100%25' style='stop-color:%23ec4899'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='url(%23g)'/%3E%3Cpath d='M30 35 L30 65 L45 65 L45 75 L70 60 L70 40 L45 25 L45 35 Z' fill='white'/%3E%3Ccircle cx='70' cy='50' r='8' fill='white'/%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/frontend/css/styles.css?v=5">
    <link rel="stylesheet" href="/frontend/css/mobile.css?v=2">
</head>
<body>
    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Auth Page -->
    <div id="auth-page" class="auth-page">
        <div class="auth-container">
            <div class="auth-card">
                <div class="auth-logo">
                    <div class="logo-icon">
                        <i class="fas fa-film"></i>
                    </div>
                    <h1>CineRate</h1>
                    <p>–í–∞—à –ª–∏—á–Ω—ã–π –∫–∏–Ω–æ–¥–Ω–µ–≤–Ω–∏–∫</p>
                </div>

                <form id="login-form" style="display: none;">
                    <h2 id="login-title" style="text-align: center; margin-bottom: 24px; color: var(--text-primary);">–í—Ö–æ–¥</h2>
                    <div class="form-group">
                        <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        <input type="text" id="login-username" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" required>
                    </div>
                    <div class="form-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="login-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                    </div>
                    <div class="error-message" id="login-error"></div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏
                    </button>
                    <div class="auth-footer">
                        –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a id="show-register">–°–æ–∑–¥–∞—Ç—å</a>
                    </div>
                </form>

                <form id="register-form" style="display: none;">
                    <h2 id="register-title" style="text-align: center; margin-bottom: 24px; color: var(--text-primary);">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                    <div class="form-group">
                        <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        <input type="text" id="reg-username" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è" required>
                    </div>
                    <div class="form-group">
                        <label>–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</label>
                        <input type="text" id="reg-display-name" placeholder="–ö–∞–∫ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è?">
                    </div>
                    <div class="form-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="reg-password" placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤" required minlength="6">
                    </div>
                    <div class="error-message" id="register-error"></div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-user-plus"></i> –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                    </button>
                    <div class="auth-footer">
                        –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a id="show-login">–í–æ–π—Ç–∏</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app-container" class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <a href="#" class="logo" id="logo-btn">
                    <div class="logo-icon">
                        <i class="fas fa-film"></i>
                    </div>
                    <span>CineRate</span>
                </a>

                <nav class="nav">
                    <button class="nav-btn active" data-page="home">
                        <i class="fas fa-home"></i>
                        <span>–ì–ª–∞–≤–Ω–∞—è</span>
                    </button>
                    <button class="nav-btn" data-page="search">
                        <i class="fas fa-search"></i>
                        <span>–ü–æ–∏—Å–∫</span>
                    </button>
                    <button class="nav-btn" data-page="watchlist">
                        <i class="fas fa-bookmark"></i>
                        <span>–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ</span>
                    </button>
                    <button class="nav-btn" data-page="ratings">
                        <i class="fas fa-star"></i>
                        <span>–ú–æ–∏ –æ—Ü–µ–Ω–∫–∏</span>
                    </button>
                    <button class="nav-btn" data-page="stats">
                        <i class="fas fa-chart-bar"></i>
                        <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                    </button>
                </nav>

                <div class="user-menu">
                    <button class="btn-icon" id="profile-btn" title="–ü—Ä–æ—Ñ–∏–ª—å">
                        <i class="fas fa-user"></i>
                    </button>
                    <button class="btn-icon" id="logout-btn" title="–í—ã–π—Ç–∏">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Home Page -->
            <section id="home-page" class="page active">
                <div class="hero">
                    <h1>–û—Ç–∫—Ä–æ–π –¥–ª—è —Å–µ–±—è –Ω–æ–≤—ã–µ —Ñ–∏–ª—å–º—ã</h1>
                    <p>–û—Ü–µ–Ω–∏–≤–∞–π, —Å–æ—Ö—Ä–∞–Ω—è–π –∏ –¥–µ–ª–∏—Å—å —Å–≤–æ–∏–º–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏</p>
                </div>

                <div class="section">
                    <div class="section-header">
                        <h2><i class="fas fa-fire"></i> –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ —Å–µ–π—á–∞—Å</h2>
                    </div>
                    <div id="popular-movies" class="movies-grid">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-header">
                        <h2><i class="fas fa-trophy"></i> –í—ã—Å–æ–∫–æ –æ—Ü–µ–Ω–µ–Ω–Ω—ã–µ</h2>
                    </div>
                    <div id="top-rated-movies" class="movies-grid">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Search Page -->
            <section id="search-page" class="page">
                <div class="search-hero">
                    <h1>–ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–µ—Ä–∏–∞–ª–æ–≤</h1>
                    <div class="search-box">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –∏–ª–∏ —Å–µ—Ä–∏–∞–ª–∞..." autocomplete="off">
                        <button id="search-btn" class="btn btn-primary">–ù–∞–π—Ç–∏</button>
                    </div>
                </div>

                <div id="search-results" class="search-results">
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>–ù–∞—á–Ω–∏—Ç–µ –ø–æ–∏—Å–∫</h3>
                        <p>–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –∏–ª–∏ —Å–µ—Ä–∏–∞–ª–∞</p>
                    </div>
                </div>
            </section>

            <!-- Ratings Page -->
            <section id="ratings-page" class="page">
                <div class="page-header">
                    <h1>–ú–æ–∏ –æ—Ü–µ–Ω–∫–∏</h1>
                    <p>–í—Å–µ —Ñ–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Ü–µ–Ω–∏–ª–∏</p>
                </div>

                <div class="filter-bar">
                    <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
                    <button class="filter-btn" data-filter="movies">üé¨ –§–∏–ª—å–º—ã</button>
                    <button class="filter-btn" data-filter="tv">üì∫ –°–µ—Ä–∏–∞–ª—ã</button>
                    <button class="filter-btn" data-filter="10">10 ‚òÖ</button>
                    <button class="filter-btn" data-filter="high">8-9 ‚òÖ</button>
                    <button class="filter-btn" data-filter="low">1-7 ‚òÖ</button>
                </div>

                <div id="ratings-list" class="movies-grid">
                    <div class="empty-state">
                        <i class="fas fa-star"></i>
                        <h3>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ü–µ–Ω–æ–∫</h3>
                        <p>–ù–∞–π–¥–∏—Ç–µ —Ñ–∏–ª—å–º –∏ –ø–æ—Å—Ç–∞–≤—å—Ç–µ –µ–º—É –æ—Ü–µ–Ω–∫—É</p>
                    </div>
                </div>
            </section>

            <!-- Watchlist Page -->
            <section id="watchlist-page" class="page">
                <div class="page-header">
                    <h1><i class="fas fa-bookmark"></i> –°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ</h1>
                    <p>–§–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å</p>
                </div>

                <div id="watchlist-grid" class="movies-grid">
                    <div class="empty-state">
                        <i class="fas fa-bookmark"></i>
                        <h3>–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç</h3>
                        <p>–î–æ–±–∞–≤–ª—è–π—Ç–µ —Ñ–∏–ª—å–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ</p>
                    </div>
                </div>
            </section>

            <!-- Stats Page -->
            <section id="stats-page" class="page">
                <div class="page-header">
                    <h1>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
                    <p>–ê–Ω–∞–ª–∏–∑ –≤–∞—à–∏—Ö –∫–∏–Ω–æ–ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-film"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-total">0</span>
                            <span class="stat-label">–í—Å–µ–≥–æ –æ—Ü–µ–Ω–æ–∫</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon gold">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-avg">0.0</span>
                            <span class="stat-label">–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-arrow-up"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-max">0</span>
                            <span class="stat-label">–õ—É—á—à–∞—è –æ—Ü–µ–Ω–∫–∞</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">
                            <i class="fas fa-arrow-down"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-min">0</span>
                            <span class="stat-label">–•—É–¥—à–∞—è –æ—Ü–µ–Ω–∫–∞</span>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <h2><i class="fas fa-chart-bar"></i> –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫</h2>
                    <div id="rating-chart" class="rating-chart">
                        <!-- Chart bars will be inserted here -->
                    </div>
                </div>

                <div class="top-movies-section">
                    <h2><i class="fas fa-trophy"></i> –õ—É—á—à–∏–µ —Ñ–∏–ª—å–º—ã</h2>
                    <div id="top-movies-list" class="top-movies-list">
                        <!-- Top movies will be inserted here -->
                    </div>
                </div>

                <div id="stats-extra"></div>
            </section>
        </main>
    </div>

    <!-- Movie Detail Modal -->
    <div class="modal-overlay" id="movie-modal">
        <div class="modal">
            <button class="modal-close" id="modal-close">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="modal-content">
                <div class="modal-poster" id="modal-poster">
                    <!-- Poster will be inserted here -->
                </div>
                
                <div class="modal-info">
                    <div class="modal-header">
                        <span class="media-badge" id="modal-media-type">–§–∏–ª—å–º</span>
                        <h2 id="modal-title">–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</h2>
                        <div class="modal-meta">
                            <span id="modal-year">2024</span>
                            <span class="separator">‚Ä¢</span>
                            <span id="modal-genres">–î—Ä–∞–º–∞, –¢—Ä–∏–ª–ª–µ—Ä</span>
                            <span class="separator sep-rating">‚Ä¢</span>
                            <span class="rating" id="modal-rating">
                                <i class="fas fa-star"></i>
                                <span id="modal-tmdb-rating">8.5</span>
                            </span>
                        </div>
                    </div>
                    
                    <div class="overview-wrap">
                        <p class="modal-overview" id="modal-overview">
                            –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞...
                        </p>
                        <button class="overview-more-btn" id="overview-more" style="display: none;">
                            <span>–ï—â—ë</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>

                    <div class="rating-section">
                        <div class="rating-circle-wrap">
                            <div class="rating-ring" id="rating-ring">
                                <svg viewBox="0 0 120 120">
                                    <defs>
                                        <linearGradient id="ringGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#ef4444"/>
                                            <stop offset="50%" style="stop-color:#f59e0b"/>
                                            <stop offset="100%" style="stop-color:#22c55e"/>
                                        </linearGradient>
                                    </defs>
                                    <circle class="ring-bg" cx="60" cy="60" r="54"/>
                                    <circle class="ring-progress" id="ring-progress" cx="60" cy="60" r="54"/>
                                </svg>
                                <div class="ring-value">
                                    <span class="ring-num" id="rating-value">1</span>
                                </div>
                            </div>
                            <div class="rating-word" id="rating-text">–û—Ü–µ–Ω–∏—Ç–µ —Ñ–∏–ª—å–º</div>
                        </div>
                        
                        <div class="slider-wrap">
                            <div class="slider-bar" id="slider-bar">
                                <div class="slider-fill" id="slider-fill"></div>
                                <div class="slider-knob" id="slider-knob"></div>
                            </div>
                            <div class="slider-labels">
                                <span>1</span>
                                <span>10</span>
                            </div>
                        </div>
                        
                        <div class="rating-comment">
                            <input type="text" id="rating-comment-input" placeholder="–ó–∞–º–µ—Ç–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –¥–æ—Å–º–æ—Ç—Ä–µ–ª 4 —Å–µ–∑–æ–Ω)..." maxlength="100">
                        </div>
                        
                        <div class="modal-actions">
                            <button class="btn btn-secondary" id="modal-cancel">–û—Ç–º–µ–Ω–∞</button>
                            <button class="btn btn-secondary" id="modal-watchlist" title="–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ">
                                <i class="fas fa-bookmark"></i>
                            </button>
                            <button class="btn btn-primary" id="modal-save">
                                <i class="fas fa-check"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal-overlay" id="profile-modal">
        <div class="modal" style="max-width: 400px;">
            <button class="modal-close" id="profile-modal-close">
                <i class="fas fa-times"></i>
            </button>
            <div style="padding: 32px; text-align: center;">
                <div style="width: 80px; height: 80px; background: var(--gradient-primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 32px;" id="profile-modal-avatar">?</div>
                <h2 style="margin-bottom: 24px;">–ü—Ä–æ—Ñ–∏–ª—å</h2>
                <div class="form-group" style="text-align: left;">
                    <label>–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</label>
                    <input type="text" id="profile-display-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" style="width: 100%;">
                </div>
                <div style="display: flex; gap: 12px; margin-top: 24px;">
                    <button class="btn btn-secondary" id="profile-modal-cancel" style="flex: 1;">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" id="save-profile-btn" style="flex: 1;">
                        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Dialog -->
    <div class="confirm-overlay" id="confirm-overlay">
        <div class="confirm-dialog">
            <div class="confirm-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3 class="confirm-title">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ</h3>
            <p class="confirm-message" id="confirm-message">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</p>
            <div class="confirm-actions">
                <button class="btn btn-secondary" id="confirm-cancel">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-danger" id="confirm-ok">
                    <i class="fas fa-check"></i> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                </button>
            </div>
        </div>
    </div>

    <script src="/frontend/js/api.js?v=5"></script>
    <script src="/frontend/js/auth.js?v=3"></script>
    <script src="/frontend/js/app.js?v=3"></script>
</body>
</html>
